---
layout: default
---

<article class="post">
        <header class="post-header-sticky">
            <div class="post-header-content">
                <img src="/assets/images/profile-pic.jpg" alt="Jay Balcher" class="post-author-avatar-sm">
                <div class="post-header-info">
                    <h1 class="post-title-inline">{{ page.title }}</h1>
                    <div class="post-meta-inline">
                        <span class="post-author-inline">Jay Balcher</span>
                        <span class="post-meta-sep">Â·</span>
                        <time class="post-date-inline">
                            {{ page.date | date: "%b %-d, %Y" }}
                        </time>
                    </div>
                </div>
                <div class="share-container">
                <button class="share-btn share-btn-header" aria-label="Share this post" title="Share">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="18" cy="5" r="3"></circle>
                        <circle cx="6" cy="12" r="3"></circle>
                        <circle cx="18" cy="19" r="3"></circle>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                    </svg>
                </button>
                <div class="share-dropdown">
                    <button class="share-dropdown-item" data-action="copy">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        <span>Copy link</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="post-content">
        {{ content }}
    </div>

    <footer class="post-footer">
        <div class="post-footer-content">
            <span class="share-label">Enjoyed this post?</span>
            <div class="share-container">
                <button class="share-btn share-btn-footer" aria-label="Share this post">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="18" cy="5" r="3"></circle>
                        <circle cx="6" cy="12" r="3"></circle>
                        <circle cx="18" cy="19" r="3"></circle>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                    </svg>
                    <span>Share</span>
                </button>
                <div class="share-dropdown share-dropdown-up">
                    <button class="share-dropdown-item" data-action="copy">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        <span>Copy link</span>
                    </button>
                </div>
            </div>
        </div>
    </footer>
</article>

<!-- Share Toast Notification -->
<div class="share-toast" id="shareToast">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
    <span>Link copied to clipboard!</span>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {

        // Handle mobile fixed header positioning
        const postHeader = document.querySelector('.post-header-sticky');
        const mainHeader = document.querySelector('body > header');

        if (postHeader && mainHeader && window.innerWidth <= 768) {
            const getHeaderHeight = () => mainHeader.offsetHeight;

            const updatePostHeaderPosition = () => {
                if (mainHeader.classList.contains('nav-hidden')) {
                    postHeader.style.top = '0';
                } else {
                    postHeader.style.top = getHeaderHeight() + 'px';
                }
            };

            updatePostHeaderPosition();

            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.attributeName === 'class') {
                        updatePostHeaderPosition();
                    }
                });
            });

            observer.observe(mainHeader, { attributes: true });
            window.addEventListener('resize', updatePostHeaderPosition);
        }

        // Share functionality
        const shareContainers = document.querySelectorAll('.share-container');
        const shareToast = document.getElementById('shareToast');
        const pageTitle = document.title;
        const pageUrl = window.location.href;

        // Check if native Web Share API is supported AND we're on mobile
        const isMobile = () => {
            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            const mobileUA = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            return hasTouch && mobileUA;
        };

        const canNativeShare = () => {
            // Web Share API requires secure context (HTTPS) - may not work on localhost
            const isSecure = window.isSecureContext;
            const hasShare = typeof navigator.share === 'function';
            return isMobile() && isSecure && hasShare;
        };

        // Show toast notification
        function showToast() {
            shareToast.classList.add('show');
            setTimeout(() => {
                shareToast.classList.remove('show');
            }, 2500);
        }

        // Copy to clipboard
        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(pageUrl);
                showToast();
            } catch (err) {
                const textArea = document.createElement('textarea');
                textArea.value = pageUrl;
                textArea.style.position = 'fixed';
                textArea.style.left = '-9999px';
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast();
            }
        }

        // Close all dropdowns
        function closeAllDropdowns() {
            document.querySelectorAll('.share-container.open').forEach(c => c.classList.remove('open'));
        }

        // Handle share button clicks
        shareContainers.forEach(container => {
            const btn = container.querySelector('.share-btn');
            const dropdown = container.querySelector('.share-dropdown');
            const copyBtn = container.querySelector('[data-action="copy"]');

            btn.addEventListener('click', async (e) => {
                e.stopPropagation();

                // On mobile with native share support, use native share
                if (canNativeShare()) {
                    try {
                        await navigator.share({ title: pageTitle, url: pageUrl });
                    } catch (err) {
                        if (err.name !== 'AbortError') {
                            copyToClipboard();
                        }
                    }
                } else {
                    // Desktop: toggle dropdown
                    const isOpen = container.classList.contains('open');
                    closeAllDropdowns();
                    if (!isOpen) {
                        container.classList.add('open');
                    }
                }
            });

            // Copy link button in dropdown
            if (copyBtn) {
                copyBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    copyToClipboard();
                    closeAllDropdowns();
                });
            }
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            closeAllDropdowns();
        });
    });
</script>